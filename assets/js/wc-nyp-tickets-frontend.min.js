/*!  2.0.0-rc.1 2021-10-07 12:23 */

jQuery(function(t){t(document).on("wc-nyp-initializing",function(t,e){const i=e.$el;let c=i.find(tribe.tickets.block.selectors.submit);c.length||(c=i.find(tribe.tickets.modal.selectors.submit)),c.length&&(e.$add_to_cart=c)}),t(document).on("afterTicketsQuantityChange.tribeTicketsBlock",function(t,e){const i=e.closest(tribe.tickets.block.selectors.item).find(".nyp");if(i.length){const t=e.val()>0;i.data("optional_status",t),i.trigger("wc-nyp-update")}}),t(tribe.dialogs.events).on("tribe_dialog_show_ar_modal",function(e,i){const c=t(i),o=c.find(tribe.tickets.modal.selectors.form),s=c.find(tribe.tickets.modal.selectors.cartForm),r=t(document).find(tribe.tickets.block.selectors.form).filter('[data-post-id="'+o.data("postId")+'"]').find(tribe.tickets.block.selectors.item),n=tribe.tickets.block.getTicketsBlockProvider(o);r.each(function(){const e=t(this),i=e.data("ticket-id"),c=s.find('[data-ticket-id="'+i+'"]');if(0===c.length||0===e.length||!c.hasClass("nyp-product"))return;const o=e.data("ticket-price");c.data("ticket-price",o).find(".nyp-input").val(woocommerce_nyp_format_price(o)).attr("type","hidden"),c.find(tribe.tickets.modal.selectors.itemPrice).text(tribe.tickets.utils.numberFormat(o,n)),tribe.tickets.modal.updateItem(i,c,e)}),o.addClass("cart").wc_nyp_form()}),t(tribe.tickets.block.selectors.form).each(function(){const e=t(this);tribe.tickets.block.commerceSelector.woo===tribe.tickets.block.getTicketsBlockProvider(e)&&e.addClass("cart").wc_nyp_form()}),t(document).on("wc-nyp-updated",function(e,i){const c=i.$cart,o=tribe.tickets.block.getTicketsBlockProvider(c),s=i.$el.closest(tribe.tickets.block.selectors.item),r=s.data("ticket-id"),n=i.getPrice();if(!s.length)return;t(tribe.tickets.block.selectors.container).find(tribe.tickets.block.selectors.item).filter('[data-ticket-id="'+r+'"]').data("ticket-price",n),s.data("ticket-price",n),s.find(tribe.tickets.block.selectors.itemPrice).text(tribe.tickets.utils.numberFormat(n,o));const l=s.find(tribe.tickets.block.selectors.itemQuantityInput);l.length&&parseInt(l.val(),10)&&(tribe.tickets.block.updateFormTotals(c),c.is(tribe.tickets.modal.selectors.form)&&tribe.tickets.modal.updateItem(r,s))}),t(document).on("isValidForm.eventTicketsModal isValidForm.tribeTicketsBlock",function(t,e){const i=e.wc_nyp_get_script_object();return!(i&&!i.isValid("submit"))||(console.log("not valid"),!1)})});